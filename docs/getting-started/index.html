<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Getting Started # First time using an FPGA? This guide should cover everything you need to get the example verilog project built and loaded up on the OrangeCrab.
Toolchain Setup # This guide will make use of the Open Source FPGA toolchain. It is possible to build and install these from scratch, but the whole process takes around 30 minutes, and can be a bit tricky if you&rsquo;re just getting started."><meta name=theme-color media="(prefers-color-scheme: light)" content="#ffffff"><meta name=theme-color media="(prefers-color-scheme: dark)" content="#343a40"><meta name=color-scheme content="light dark"><meta property="og:title" content="Getting Started"><meta property="og:description" content="Getting Started # First time using an FPGA? This guide should cover everything you need to get the example verilog project built and loaded up on the OrangeCrab.
Toolchain Setup # This guide will make use of the Open Source FPGA toolchain. It is possible to build and install these from scratch, but the whole process takes around 30 minutes, and can be a bit tricky if you&rsquo;re just getting started."><meta property="og:type" content="article"><meta property="og:url" content="https://orangecrab-fpga.github.io/orangecrab-hardware/docs/getting-started/"><meta property="article:section" content="docs"><meta property="article:modified_time" content="2023-08-27T14:29:01+09:30"><title>Getting Started | OrangeCrab</title><link rel=manifest href=/orangecrab-hardware/manifest.json><link rel=icon href=/orangecrab-hardware/favicon.png><link rel=stylesheet href=/orangecrab-hardware/book.min.33a48f5432973b8ff9a82679d9e45d67f2c15d4399bd2829269455cfe390b5e8.css integrity="sha256-M6SPVDKXO4/5qCZ52eRdZ/LBXUOZvSgpJpRVz+OQteg=" crossorigin=anonymous><script defer src=/orangecrab-hardware/flexsearch.min.js></script>
<script defer src=/orangecrab-hardware/en.search.min.06559daf88389a6a5da52bb80704772c388d27e7def03ad092998f06e3dc79d6.js integrity="sha256-BlWdr4g4mmpdpSu4BwR3LDiNJ+fe8DrQkpmPBuPcedY=" crossorigin=anonymous></script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/orangecrab-hardware/><span>OrangeCrab</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/orangecrab-hardware/>Hardware</a><ul><li><a href=/orangecrab-hardware/docs/r0.1/>r0.1</a></li><li><a href=/orangecrab-hardware/docs/r0.2/>r0.2</a></li><li><a href=/orangecrab-hardware/docs/r0.2.1/>r0.2.1</a></li></ul></li><li><a href=/orangecrab-hardware/docs/getting-started/ class=active>Getting Started</a></li><li><a href=/orangecrab-hardware/docs/pinout/>Pinout</a></li><li><a href=/orangecrab-hardware/docs/downloads/>Downloads</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/orangecrab-hardware/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Getting Started</strong>
<label for=toc-control><img src=/orangecrab-hardware/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#toolchain-setup>Toolchain Setup</a></li><li><a href=#build-verilog-example>Build Verilog Example</a></li><li><a href=#upload-verilog-example>Upload Verilog Example</a></li></ul></nav></aside></header><article class=markdown><h1 id=getting-started>Getting Started
<a class=anchor href=#getting-started>#</a></h1><p>First time using an FPGA? This guide should cover everything you need to get the example verilog project built and loaded up on the OrangeCrab.</p><h2 id=toolchain-setup>Toolchain Setup
<a class=anchor href=#toolchain-setup>#</a></h2><hr><p>This guide will make use of the Open Source FPGA toolchain. It is possible to build and install these from scratch, but the whole process takes around 30 minutes, and can be a bit tricky if you&rsquo;re just getting started.</p><p>It&rsquo;s advised to use an automated build from <a href=https://github.com/YosysHQ/oss-cad-suite-build>YosysHQ/oss-cad-suite-build</a></p><p>The guide will use Ubuntu Linux for a command reference.</p><hr><p>Grab the <a href=https://github.com/YosysHQ/oss-cad-suite-build/releases/latest>latest</a> build for your platform, extract them somewhere on your PC, and add the <code>oss-cad-suite/bin</code> folder to your path:</p><pre tabindex=0><code>$ tar -xvf oss-cad-suite-linux-x64-[version].tgz
$ export PATH=$(pwd)/oss-cad-suite/bin:$PATH
</code></pre><pre tabindex=0><code> - MacOS:              export PATH=[path-to-bin]:$PATH
 - Linux:              export PATH=[path-to-bin]:$PATH
 - Windows Powershell: $ENV:PATH = &#34;[path-to-bin];&#34; + $ENV:PATH
 - Windows cmd.exe:    PATH=[path-to-bin];%PATH%
</code></pre><p>Check that they&rsquo;ve been correctly installed by running:</p><pre tabindex=0><code>$ yosys -V
Yosys 0.32+63 (git sha1 de54cf1a0, clang 10.0.0-4ubuntu1 -fPIC -Os)$ nextpnr-ecp5 -V
&#34;nextpnr-ecp5&#34; -- Next Generation Place and Route (Version nextpnr-0.6-46-ge08471df)
</code></pre><blockquote class="book-hint warning">The above steps only set the PATH variable for the current terminal session. Depending on your platform there are options to ensure the tools are kept in your path.</blockquote><hr><p>On linux based systems you may also need to add a udev rule to enable user access to the usb device, once added you&rsquo;ll need to reload the rules or un-plug and reconnect the OrangeCrab for it to take effect</p><pre tabindex=0><code>$ echo &#34;ATTRS{idVendor}==\&#34;1209\&#34;, ATTRS{idProduct}==\&#34;5af0\&#34;, MODE=\&#34;0666\&#34;, GROUP=\&#34;plugdev\&#34;, TAG+=\&#34;uaccess\&#34;&#34; | sudo tee /etc/udev/rules.d/99-orangecrab.rules
$ sudo udevadm trigger
</code></pre><p>You can check the connection and permissions using <code>dfu-util</code></p><pre tabindex=0><code>$ dfu-util --list
dfu-util 0.11-dev

Copyright 2005-2009 Weston Schmidt, Harald Welte and OpenMoko Inc.
Copyright 2010-2021 Tormod Volden and Stefan Schmidt
This program is Free Software and has ABSOLUTELY NO WARRANTY
Please report bugs to http://sourceforge.net/p/dfu-util/tickets/

Found DFU: [1209:5af0] ver=0101, devnum=53, cfg=1, intf=0, path=&#34;1-1&#34;, alt=0, name=&#34;0x00080000 Bitstream&#34;, serial=&#34;UNKNOWN&#34;
Found DFU: [1209:5af0] ver=0101, devnum=53, cfg=1, intf=0, path=&#34;1-1&#34;, alt=1, name=&#34;0x00100000 RISC-V Firmware&#34;, serial=&#34;UNKNOWN&#34;
</code></pre><h2 id=build-verilog-example>Build Verilog Example
<a class=anchor href=#build-verilog-example>#</a></h2><hr><p>Download the <a href=https://github.com/orangecrab-fpga/orangecrab-examples>example</a> repository. We&rsquo;ll build the verilog/blink example to test that everything is working.</p><pre tabindex=0><code>$ git clone https://github.com/orangecrab-fpga/orangecrab-examples
$ cd OrangeCrab-examples/verilog/blink
$ make

    ... snip ...

Info: [ 81336,  81410) |* 
Info: [ 81410,  81484) | 
Info: [ 81484,  81558) | 
Info: [ 81558,  81632) |* 
ecppack --compress --freq 38.8 --input blink_out.config --bit blink.bit
cp blink.bit blink.dfu
dfu-suffix -v 1209 -p 5af0 -a blink.dfu
dfu-suffix (dfu-util) 0.11

Copyright 2011-2012 Stefan Schmidt, 2013-2014 Tormod Volden
This program is Free Software and has ABSOLUTELY NO WARRANTY
Please report bugs to http://sourceforge.net/p/dfu-util/tickets/

Suffix successfully added to file
</code></pre><blockquote class="book-hint info"><p>If you have an OrangeCrab with a ECP5-85F installed then add the DENSITY flag when making</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ make <span class=nv>DENSITY</span><span class=o>=</span>85F
</span></span></code></pre></div></blockquote><p><strong>ðŸ¥³ Congratulations you&rsquo;ve successfully compiled gateware for the ECP5 on the orangecrab!</strong></p><h2 id=upload-verilog-example>Upload Verilog Example
<a class=anchor href=#upload-verilog-example>#</a></h2><hr><p>Next, while holding the button on the OrangeCrab, plug it in. This enters the bootloader and enables you to upload new gateware.<br>The LED should be smoothly fading through different colours.</p><pre tabindex=0><code>$ make dfu
dfu-util -D blink.dfu
dfu-util 0.11

Copyright 2005-2009 Weston Schmidt, Harald Welte and OpenMoko Inc.
Copyright 2010-2016 Tormod Volden and Stefan Schmidt
This program is Free Software and has ABSOLUTELY NO WARRANTY
Please report bugs to http://sourceforge.net/p/dfu-util/tickets/

Match vendor ID from file: 1209
Match product ID from file: 5af0
Opening DFU capable USB device...
ID 1209:5af0
Run-time device DFU version 0101
Claiming USB DFU Interface...
Setting Alternate Setting #0 ...
Determining device status: state = dfuIDLE, status = 0
dfuIDLE, continuing
DFU mode device DFU version 0101
Device returned transfer size 4096
Copying data from PC to DFU device
Download	[=========================] 100%        99314 bytes
Download done.
state(7) = dfuMANIFEST, status(0) = No error condition is present
state(8) = dfuMANIFEST-WAIT-RESET, status(0) = No error condition is present
Done!
</code></pre><p>You should now see the LED blinking through colours!</p><p><strong>ðŸ¥³ Congratulations you&rsquo;ve successfully loaded this gateware onto the ECP5 on the OrangeCrab!</strong></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#toolchain-setup>Toolchain Setup</a></li><li><a href=#build-verilog-example>Build Verilog Example</a></li><li><a href=#upload-verilog-example>Upload Verilog Example</a></li></ul></nav></div></aside></main></body></html>